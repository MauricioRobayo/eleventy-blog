<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Effortless refactor with De Morgan&#39;s Laws</title>
    <meta name="description" content="A Simple blog">
    <link rel="stylesheet" href="/eleventy-base-blog/css/index.css">
    <link rel="stylesheet" href="/eleventy-base-blog/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/eleventy-base-blog/feed/feed.xml" type="application/atom+xml" title="Mauricio Robayo&#39;s blog">
    <link rel="alternate" href="/eleventy-base-blog/feed/feed.json" type="application/json" title="Mauricio Robayo&#39;s blog">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/eleventy-base-blog/">Mauricio Robayo&#39;s blog</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/eleventy-base-blog/">Home</a></li>
        <li class="nav-item"><a href="/eleventy-base-blog/posts/">Archive</a></li>
        <li class="nav-item"><a href="/eleventy-base-blog/about/">About Me</a></li>
      </ul>
    </header>

    <main  class="tmpl-post">

      <!-- Delete this message -->
      <div class="warning">
        <ol>
          <li>Edit the <code>_data/metadata.json</code> with your blogâ€™s information.</li>
          <li>(Optional) Edit <code>.eleventy.js</code> with your <a href="https://www.11ty.dev/docs/config/">configuration preferences</a>.</li>
          <li>Delete this message from <code>_includes/layouts/base.njk</code>.</li>
        </ol>
        <p><em>This is an <a href="https://www.11ty.dev/">Eleventy project</a> created from the <a href="https://github.com/11ty/eleventy-base-blog"><code>eleventy-base-blog</code> repo</a>.</em></p>
      </div>
      <!-- Stop deleting -->

      <h1>Effortless refactor with De Morgan&#39;s Laws</h1>

<time datetime="2020-07-04">04 Jul 2020</time><a href="/eleventy-base-blog/tags/refactoring/" class="post-tag">refactoring</a>

<p>I recently learned about <a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws">De Morgan's laws</a> by watching an informative video by the <a href="https://www.youtube.com/channel/UCgs-54tlVBF80MMD9_YqBng">ProgramArtist</a> about code refactoring.</p>
<p>In the video he quickly mentions De Morgan's laws to simplify a section of the code.</p>
<p>De Morgan's laws are a pair of transformation rules used in Boolean logic. They state that we can reverse everything inside the parenthesis so we can remove the negation:</p>
<pre><code>!(A &amp;&amp; B) === !A || !B
!(A || B) === !A &amp;&amp; !B
</code></pre>
<p>In programming, reading a conditional that is wrap inside a negation adds another level of complexity, as we must understand the logic expression and then negate it.</p>
<p>In the video, he is using a real piece of code that looks like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><br>  <span class="token operator">!</span>exports<span class="token punctuation">.</span>sqlTimingLogger<span class="token punctuation">.</span><span class="token function">isErrorEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>  <span class="token punctuation">(</span><span class="token operator">!</span>exports<span class="token punctuation">.</span>DriverSpy<span class="token punctuation">.</span>dumpSqlFilteringOn <span class="token operator">||</span> <span class="token function">shouldSqlBeLogged</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Ouch! Understanding that condition requires a lot of mental effort.</p>
<p>Let's make it more general so it is easier to follow the process:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>conditionA <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>conditionB <span class="token operator">||</span> conditionC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>So, how can we simplify this by applying De Morgan's laws?</p>
<p>First, we can remove the negation by reversing what's inside the parenthesis:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>conditionA <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token operator">!</span>conditionB <span class="token operator">||</span> conditionC<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Now the outer negation is gone, but we have another inner negation to which we can also apply De Morgan's law:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>conditionA <span class="token operator">||</span> <span class="token punctuation">(</span>conditionB <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>conditionC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><br><span class="token punctuation">}</span></code></pre>
<p>This becomes easier to understand as we don't have to negate some inner logic. If we followed De Morgan's laws, we can be confident that our logic is the same, and we don't have to put our brains at work to decipher what's going on.</p>
<p>What's more, now that we have removed any wrapping negations effortlessly but applying De Morgan's law, we can simplify this into separate if statements which will make this a breeze to understand:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>conditionA<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span>conditionB <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>conditionC<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Let's compare that with the initial code:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>conditionA <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>conditionB <span class="token operator">||</span> conditionC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Thanks to De Morgan's laws, we didn't even have to understand the initial logic to refactor it and make it cleaner.</p>

<hr>
<ul><li>Previous: <a href="/eleventy-base-blog/posts/00002/">10x your code with the facade pattern, currying, and closures</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /eleventy-base-blog/posts/00001/ -->
  </body>
</html>
